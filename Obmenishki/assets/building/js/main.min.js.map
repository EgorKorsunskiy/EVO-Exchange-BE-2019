{"version":3,"names":[],"mappings":"","sources":["main.min.js"],"sourcesContent":["\r\n\r\nclass LocalStorageUtil {\r\n    constructor(){\r\n        this.keyName = 'products';\r\n    }\r\n\r\n\r\n    getProducts(){\r\n        const productsLocalStorag = localStorage.getItem(this.keyName);\r\n        if (productsLocalStorag !== null) {\r\n            return JSON.parse(productsLocalStorag);\r\n        }\r\n        return [];\r\n    }\r\n\r\n    putProducts(id){\r\n        let products = this.getProducts();\r\n        let pushProducts = false;\r\n        const index = products.indexOf(id);\r\n\r\n        if(index === -1) {\r\n            products.push(id);\r\n            pushProducts = true\r\n        }else {\r\n            products.splice(index, 1)\r\n        }\r\n\r\n        localStorage.setItem(this.keyName, JSON.stringify(products))\r\n\r\n        return { pushProducts,products }\r\n\r\n\r\n    }\r\n}\r\n\r\nconst localStorageUtil = new LocalStorageUtil();\r\nconst personalArea = document.getElementById('personalArea')\r\nconst navbar       = document.querySelector('.navbar')\r\n\r\n\r\nfunction CreatPersonalArea(url) {\r\n    let count = 0;\r\n\r\n    if(JSON.parse(localStorage.getItem('products')) ) {\r\n        count = JSON.parse(localStorage.getItem('products')).length\r\n    }\r\n\r\n    if(url === '' ) {\r\n        personalArea.innerHTML = `\r\n        <a href='#' class=\"personalArea \">\r\n            <div class='userPhoto-default icon-user2'></div>\r\n            <span class='personalArea-text' >Мой кабинет</span>\r\n            <div class='personalAreaCounter'>${count}</div>\r\n        </a>\r\n        \r\n        `\r\n    } else {\r\n        personalArea.innerHTML = `\r\n        <a href='#' class=\"personalArea\">\r\n            <img src='${url}' class='userPhoto'></img>\r\n            <span class='personalArea-text'>Мой кабинет</span>\r\n            <div class='personalAreaCounter'>${count}</div>\r\n        </a>\r\n        `\r\n    }\r\n}\r\n\r\nfunction LikeClick(){\r\n    document.querySelector('.personalAreaCounter').innerHTML = `${JSON.parse(localStorage.getItem('products')).length}`\r\n}\r\nconst presentSliderElements = document.querySelectorAll('.presentSlider-element')\r\nlet current = 0;\r\n\r\n\r\nfunction presentSlider(n) {\r\n\r\n    presentSliderElements[current].classList.add('opasity')\r\n\r\n    current = n + current;\r\n\r\n\r\n    if(current >= presentSliderElements.length){\r\n        current = 0\r\n    }\r\n\r\n    if(current < 0) {\r\n        current = presentSliderElements.length - 1\r\n        presentSliderElements[current].classList.remove('opasity')\r\n    }else if (current < presentSliderElements.length){\r\n        presentSliderElements[current].classList.remove('opasity')\r\n    }\r\n\r\n}\r\npresentSlider(0)\r\n\r\n\r\nfunction presentSliderAutoMove (){\r\n\r\n\r\n\r\n    for(let i = 0; i < 3; i++) {\r\n        let n = 1\r\n        if(i%2 != 0){\r\n            n = -1\r\n        }\r\n\r\n        setInterval(() => {\r\n            presentSlider(n)\r\n        }, 3000);\r\n    }\r\n}\r\npresentSliderAutoMove()\r\nconst PRODUCT_LIST = document.getElementById('products-list');\r\nconst LIKE_THIS    = document.querySelectorAll('.product-like-this');\r\n\r\nconst randomSort = (item) => item.sort( () => Math.random() - 0.5 );\r\n\r\nlet ItemsListLength = 8; // 8 придел количества отображаемых элементов на странице\r\n\r\n\r\nclass Products{\r\n\r\n\r\n    handleSetLocationStorage (el, id){\r\n        const { pushProducts,products } = localStorageUtil.putProducts(id)\r\n\r\n        if(pushProducts) {\r\n            el.classList.add('product-like-this__active')\r\n\r\n        }else {\r\n            el.classList.remove('product-like-this__active')\r\n\r\n        }\r\n        LikeClick()\r\n    }\r\n\r\n\r\n\r\n    render(data) {\r\n        const productsStore = localStorageUtil.getProducts();\r\n        let htmlCtalog = ''\r\n        let i = 0;\r\n        let avatar = ''\r\n        CreatPersonalArea(avatar)\r\n\r\n        data.forEach( (elem )=> {\r\n\r\n            let activeClass = '' ;\r\n\r\n            let product = elem.product,\r\n                title   = elem.description,\r\n                img     = product.images[0].resourceUrl,\r\n                locl    = elem.location.city,\r\n                id      = elem.id;\r\n            i++\r\n\r\n            if(productsStore.indexOf(id) === -1){\r\n                activeClass = ''\r\n            }else {\r\n                activeClass = ' product-like-this__active';\r\n            }\r\n\r\n            if(i <= +ItemsListLength ){\r\n                //   products-list-item__active\r\n                htmlCtalog += `\r\n                    <li class=\"products-list-item \">\r\n                        <span class=\"product-like-this icon-star ${activeClass}\" \r\n                                data-id-item=\"${id}\"\r\n                                onclick='productsPage.handleSetLocationStorage(this, \"${id}\")'>\r\n                                </span>\r\n\r\n                        <div class=\"products-list-item__img-box\">\r\n                            <img src=\"img/cards/${img}\" alt=\"image\" class=\"products-list-item__img\">\r\n                        </div>\r\n                    \r\n                        <div class=\"products-list-item__title\">${title}</div>\r\n                        <span class=\"products-list-item__location \">\r\n                        <span class=\"icon-Facebook-Places\"> </span>${locl}</span>\r\n                        <a href=\" \" class=\"products-list-item__watch\" data-id=${id}>смотреть</a> \r\n                        </li>      \r\n                    `\r\n            }\r\n\r\n\r\n\r\n\r\n        });\r\n\r\n        PRODUCT_LIST.innerHTML = `${htmlCtalog}`\r\n\r\n    }\r\n\r\n}\r\n\r\nconst productsPage = new Products();\r\n\r\n// productsPage.render();\r\n\r\nfunction getData(){\r\n    fetch('goods.JSON')\r\n        .then(response => response.json())\r\n        .then(data => productsPage.render(randomSort(data)))\r\n}\r\n\r\ngetData()\r\nconst HSline = document.querySelector('.Home-page-slider__line');\r\nconst HSelements = document.querySelectorAll('.Home-page-slider__inner');\r\nconst HSsliderWidth =  document.querySelector('.Home-page-slider').offsetWidth;\r\nlet HSwidthArray = [0];\r\nlet HSlineWidth = 0;\r\nlet HSoffset = 0;\r\nlet HSstep = 0;\r\nlet HSbalance = 0\r\n\r\nfor (let i = 0; i < HSelements.length; i++) {\r\n    HSwidthArray.push([HSelements[i].offsetWidth]);\r\n    HSlineWidth += HSelements[i].offsetWidth  ;\r\n}\r\nHSline.style.width  = HSlineWidth + 'px'\r\n\r\n\r\ndocument.querySelector('.Home-page-slider').onclick = HomeSliderMove;\r\n\r\nfunction HomeSliderMove() {\r\n    HSbalance = HSlineWidth - HSsliderWidth - (+HSoffset + Number(HSwidthArray[HSstep]))\r\n\r\n    if(HSbalance >= 0 ) {\r\n        HSoffset = HSoffset + Number(HSwidthArray[HSstep]);\r\n        let offsets = Number(HSoffset)\r\n        HSline.style.left = Number(- offsets)+'px' ;\r\n\r\n    }else {\r\n        HSline.style.left = -(HSlineWidth - HSsliderWidth) + 'px'\r\n        HSoffset  = 0;\r\n        HSstep = -1;\r\n    }\r\n\r\n    if (HSstep + 1  === HSelements.length) {\r\n        HSstep = 0;\r\n        HSoffset = 0;\r\n    }else {\r\n        HSstep++\r\n    }\r\n\r\n}\r\nHomeSliderMove()\r\n\r\nsetInterval(HomeSliderMove , 5000)"],"file":"main.min.js"}